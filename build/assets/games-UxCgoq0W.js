import{r as l,j as e}from"./index-Bd1gINFa.js";import{a as h,b as v,c as E}from"./index.es-D5vGXFz8.js";import{l as V}from"./Api-6sYLnVzc.js";import{e as O}from"./Utils-DDx7YewV.js";import{C as q}from"./CCardHeader-DLt5NnOg.js";import{C as b,a as u}from"./CRow-BbVZV6NK.js";import{C as S}from"./CFormInput-C6WbVHXd.js";import{C as c}from"./CFormSelect-uNP9Q6AG.js";import{C as z,a as J,b as G,c as o,d as K,e as d}from"./CTable-C4qAWyDn.js";import{F as Q}from"./DefaultLayout-DOzS-qhz.js";import{C as X,a as Y,b as Z,c as $,d as ee}from"./CModalTitle-Bfk5q-my.js";import{C as ae}from"./CAlert-DP40CLNl.js";import"./CFormControlWrapper-CHB0lCI2.js";import"./CFormControlValidation-x0XVpzFl.js";import"./CFormLabel-3ab-VT_3.js";import"./CCloseButton-YVDgDGtT.js";import"./cil-user-CkgHmeNI.js";const ve=()=>{const[y,N]=l.useState([]),[x,_]=l.useState([]),[j,w]=l.useState([]),[A,r]=l.useState(!1),[H,m]=l.useState(!1),[T,g]=l.useState(""),[i,C]=l.useState(!1),[F,I]=l.useState(!1);l.useEffect(()=>{n(),R()},[]);const n=async(a="",s="")=>{const t={};a&&(t.searchStr=a),s&&(t.filter=s);const f=await V(t);N(f)},R=async()=>{const a=await getSportsList();setSports(a)},p=async a=>{const s=await getPositionList(a);setRoles(s)},M=a=>{let s=a.target.value;console.log(s),_(s),n(s,j)},k=a=>{let s=a.target.value;console.log(s),w(s),n(x,s)},D=async a=>{let s=await getGroupDetails(a.target.getAttribute("gr_id"));s||g("Something Went Wrong"),await setSelectedGroup(s),await p(s.game_id),r(!0),C(!0),m(!1)},L=a=>{const s=a.target.value;setSelectedGroup(t=>({...t,name:s===""?"":s}))},P=async a=>{let s=a.target.id,t=a.target.value;await updateGroup(s,t,"")?n(x,j):g("Oops! Something Went Wrong")},U=async a=>{const s=a.target.value;setSelectedGroup(t=>({...t,game_id:s===""?"":s})),p(s)},W=async a=>{const s=a.target.value;setSelectedGroup(t=>({...t,position_id:s===""?"":s})),p(game_id)},B=async a=>{r(!0),C(!1),I(!0),setSelectedGroup({name:"",game_id:"",position_id:"",status:"active"}),m(!1)};return e.jsxs("div",{children:[e.jsxs(q,{className:"d-flex",children:[e.jsx("div",{className:"w-50",children:e.jsx("h3",{children:"All Games"})}),e.jsx("div",{className:"d-flex justify-content-end w-50",children:e.jsx(h,{color:"primary",onClick:B,children:"Add Game"})})]}),e.jsx(v,{fluid:!0,children:e.jsxs(b,{className:"my-3",children:[e.jsx(u,{sm:10,children:e.jsx(S,{type:"text",placeholder:"Search by Game name","aria-label":"",onChange:M})}),e.jsx(u,{sm:2,children:e.jsx(c,{"aria-label":"",options:[{label:"Filter by Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:k})})]})}),e.jsxs(z,{bordered:!0,hover:!0,responsive:"lg",children:[e.jsx(J,{color:"primary",children:e.jsxs(G,{children:[e.jsx(o,{scope:"col",children:"#"}),e.jsx(o,{scope:"col",children:"Game Name"}),e.jsx(o,{scope:"col",children:"Status"}),e.jsx(o,{scope:"col",children:"Created Date"}),e.jsx(o,{scope:"col",children:"Action"})]})}),e.jsx(K,{hover:!0,children:y.map((a,s)=>e.jsxs(G,{id:a._id,children:[e.jsx(o,{scope:"row",children:s+1}),e.jsx(d,{children:a.name}),e.jsx(d,{children:e.jsxs(c,{"aria-label":"",value:a.status,onChange:P,id:a._id,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx(d,{children:O(a.created_on)}),e.jsx(d,{className:"text-center",children:e.jsx(E,{icon:Q,gr_id:a._id,className:"edit-icon",onClick:D})})]},s))})]}),(i||F)&&e.jsxs(X,{backdrop:"static",alignment:"center",visible:A,onClose:()=>r(!1),children:[e.jsx(Y,{children:e.jsx(Z,{children:e.jsx("strong",{children:"Modify Group"})})}),e.jsx($,{children:e.jsx(v,{children:e.jsx(b,{children:e.jsxs(u,{sm:12,children:[e.jsx(ae,{color:"danger",variant:"solid",dismissible:!0,visible:H,onClose:()=>m(!1),children:T}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(S,{type:"text",id:"gameNameInput",text:"",floatingLabel:"Group Name",placeholder:"Input Group Name Here",className:"mb-3",onChange:L,autoFocus:!0})}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(c,{"aria-label":"",placeholder:"Select Sport Here",floatingLabel:"Sport",options:[{label:"Select Sport Here",value:""},...sports.map(a=>({label:a.name,value:a._id}))],onChange:U,disabled:!!i})}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(c,{"aria-label":"",placeholder:"Select Role Here",floatingLabel:"Role",options:[{label:"Select Role Here",value:""},...roles.map(a=>({label:a.name,value:a._id}))],onChange:W,disabled:!!i})})]})})})}),e.jsxs(ee,{children:[e.jsx(h,{color:"secondary",variant:"outline",onClick:()=>r(!1),children:"Close"}),e.jsx(h,{color:"success",variant:"outline",onClick:i?updateGroupName:addGroup,children:"Save changes"})]})]})]})};export{ve as default};
