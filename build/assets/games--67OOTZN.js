import{r as t,j as e}from"./index-DR4b9FKk.js";import{a as j,b,c as q}from"./index.es-DdPAvPo8.js";import{l as z,m as J,n as G,o as K}from"./Api-D_ckjgeO.js";import{e as Q}from"./Utils-DDx7YewV.js";import{C as X}from"./CCardHeader-BiAlfoxQ.js";import{C as S,a as C}from"./CRow-BmYrOOuO.js";import{C as y}from"./CFormInput-DDlw_7FA.js";import{C as N}from"./CFormSelect-BsVxqmGG.js";import{C as Y,a as Z,b as w,c,d as $,e as x}from"./CTable-CfnXg5wo.js";import{F as ee}from"./DefaultLayout-DgjPqeLq.js";import{C as ae,a as se,b as te,c as le,d as re}from"./CModalTitle-H8SafpLa.js";import{C as ie}from"./CAlert-C9s_dyQK.js";import"./CFormControlWrapper-ChB7rYDY.js";import"./CFormControlValidation-BbX3f79y.js";import"./CFormLabel-DJzOYG3g.js";import"./CCloseButton-BF8XQPG_.js";import"./cil-user-CkgHmeNI.js";const ye=()=>{const[A,T]=t.useState([]),[m,_]=t.useState([]),[h,F]=t.useState([]),[I,i]=t.useState(!1),[M,n]=t.useState(!1),[U,d]=t.useState(""),[u,g]=t.useState(!1),[v,k]=t.useState(!1),[r,f]=t.useState(!1);t.useEffect(()=>{o(),D()},[]);const o=async(s="",a="")=>{const l={};s&&(l.searchStr=s),a&&(l.filter=a);const p=await z(l);T(p)},D=async()=>{const s=await getSportsList();setSports(s)},H=s=>{let a=s.target.value;console.log(a),_(a),o(a,h)},W=s=>{let a=s.target.value;console.log(a),F(a),o(m,a)},B=async s=>{let a=await J(s.target.getAttribute("game_id"));a||d("Something Went Wrong"),await f(a),i(!0),g(!0),n(!1)},E=s=>{const a=s.target.value;f(l=>({...l,name:a===""?"":a}))},R=async s=>{let a=s.target.id,l=s.target.value;await G(a,l,"")?o(m,h):d("Oops! Something Went Wrong")},V=async s=>{let a=r._id,l=r.status,p=r.name;await G(a,l,p)?(o(m,h),i(!1)):(d("Unable to Modify Game. Check Game Name"),n(!0))},L=async s=>{i(!0),g(!1),k(!0),f({name:"",status:"active"}),n(!1)},P=async s=>{if(r.name===""){d("Game name can't be empty"),n(!0);return}const a=await K(r);a.err?(d(a.message),n(!0)):(o(m,h),i(!1))};return e.jsxs("div",{children:[e.jsxs(X,{className:"d-flex",children:[e.jsx("div",{className:"w-50",children:e.jsx("h3",{children:"All Games"})}),e.jsx("div",{className:"d-flex justify-content-end w-50",children:e.jsx(j,{color:"primary",onClick:L,children:"Add Game"})})]}),e.jsx(b,{fluid:!0,children:e.jsxs(S,{className:"my-3",children:[e.jsx(C,{sm:10,children:e.jsx(y,{type:"text",placeholder:"Search by Game name","aria-label":"",onChange:H})}),e.jsx(C,{sm:2,children:e.jsx(N,{"aria-label":"",options:[{label:"Filter by Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:W})})]})}),e.jsxs(Y,{bordered:!0,hover:!0,responsive:"lg",children:[e.jsx(Z,{color:"primary",children:e.jsxs(w,{children:[e.jsx(c,{scope:"col",children:"#"}),e.jsx(c,{scope:"col",children:"Game Name"}),e.jsx(c,{scope:"col",children:"Status"}),e.jsx(c,{scope:"col",children:"Created Date"}),e.jsx(c,{scope:"col",children:"Action"})]})}),e.jsx($,{hover:!0,children:A.map((s,a)=>e.jsxs(w,{id:s._id,children:[e.jsx(c,{scope:"row",children:a+1}),e.jsx(x,{children:s.name}),e.jsx(x,{children:e.jsxs(N,{"aria-label":"",value:s.status,onChange:R,id:s._id,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx(x,{children:Q(s.created_on)}),e.jsx(x,{className:"text-center",children:e.jsx(q,{icon:ee,game_id:s._id,className:"edit-icon",onClick:B})})]},a))})]}),(u||v)&&e.jsxs(ae,{backdrop:"static",alignment:"center",visible:I,onClose:()=>i(!1),children:[e.jsx(se,{children:e.jsx(te,{children:e.jsx("strong",{children:u?"Modify Game":"Add Game"})})}),e.jsx(le,{children:e.jsx(b,{children:e.jsx(S,{children:e.jsxs(C,{sm:12,children:[e.jsx(ie,{color:"danger",variant:"solid",dismissible:!0,visible:M,onClose:()=>n(!1),children:U}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(y,{type:"text",id:"gameNameInput",text:"",floatingLabel:"Game Name",placeholder:"Input Game Name Here",className:"mb-3",value:(u||v)&&r.name===""?"":r.name,onChange:E,autoFocus:!0})})]})})})}),e.jsxs(re,{children:[e.jsx(j,{color:"secondary",variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(j,{color:"success",variant:"outline",onClick:u?V:P,children:"Save changes"})]})]})]})};export{ye as default};
