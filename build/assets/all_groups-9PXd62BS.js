import{r as o,j as e}from"./index-BhXHJH6-.js";import{a as S,b as y,c as te}from"./index.es-B_q45mX4.js";import{f as ae,b as se,h as oe,i as N,j as le,k as re}from"./Api-pRuKM7BS.js";import{e as ie}from"./Utils-DDx7YewV.js";import{C as ne}from"./CCardHeader-CMbMG1wE.js";import{C as w,a as C}from"./CRow-BkE4QhBB.js";import{C as A}from"./CFormInput-B3RkNtCt.js";import{C as g}from"./CFormSelect-DbR9N6_i.js";import{C as ce,a as de,b as H,c as i,d as ue,e as m}from"./CTable-CCl-TNKc.js";import{F as pe}from"./DefaultLayout-DCgGsWZI.js";import{C as me,a as he,b as xe,c as je,d as fe}from"./CModalTitle-U4T53ziP.js";import{C as ge}from"./CAlert-DXmRGiBp.js";import"./CFormControlWrapper-Dtmsr59R.js";import"./CFormControlValidation-sC0qxvAn.js";import"./CFormLabel-DwoJLxq0.js";import"./CCloseButton-CQuuRa8M.js";import"./cil-user-CkgHmeNI.js";const Ue=()=>{const[R,T]=o.useState([]),[F,I]=o.useState([]),[M,P]=o.useState([]),[h,U]=o.useState([]),[x,k]=o.useState([]),[j,D]=o.useState([]),[L,u]=o.useState(!1),[s,f]=o.useState(null),[W,r]=o.useState(!1),[B,p]=o.useState(""),[n,_]=o.useState(!1),[G,E]=o.useState(!1);o.useEffect(()=>{c(),O()},[]);const c=async(t="",a="",l="")=>{const d={};t&&(d.searchStr=t),a&&(d.filter=a),l&&(d.sort=l);const b=await ae(d);T(b)},O=async()=>{const t=await se();I(t)},v=async t=>{const a=await re(t);P(a)},V=t=>{let a=t.target.value;console.log(a),U(a),c(a,x,j)},q=t=>{let a=t.target.value;console.log(a),k(a),c(h,a,j)},z=t=>{let a=t.target.value;console.log(a),D(a),c(h,x,a)},J=async t=>{let a=await oe(t.target.getAttribute("gr_id"));a||p("Something Went Wrong"),await f(a),await v(a.game_id),u(!0),_(!0),r(!1)},K=t=>{const a=t.target.value;f(l=>({...l,name:a===""?"":a}))},Q=async t=>{let a=t.target.id,l=t.target.value;await N(a,l,"")?c(h,x,j):p("Oops! Something Went Wrong")},X=async t=>{let a=s._id,l=s.status,d=s.name;await N(a,l,d)?(c(h,x,j),u(!1)):(p("Unable to Modify Group. Check Group Name"),r(!0))},Y=async t=>{const a=t.target.value;f(l=>({...l,game_id:a===""?"":a})),v(a)},Z=async t=>{const a=t.target.value;f(l=>({...l,position_id:a===""?"":a})),v(game_id)},$=async t=>{u(!0),_(!1),E(!0),f({name:"",game_id:"",position_id:"",status:"active"}),r(!1)},ee=async t=>{if(s.name===""){p("Group name can't be empty"),r(!0);return}if(s.game_id===""){p("Please choose a sport"),r(!0);return}if(s.position_id===""){p("Please choose a role"),r(!0);return}await le(s)?(c(h,x,j),u(!1)):r(!0)};return e.jsxs("div",{children:[e.jsxs(ne,{className:"d-flex",children:[e.jsx("div",{className:"w-50",children:e.jsx("h3",{children:"All Groups"})}),e.jsx("div",{className:"d-flex justify-content-end w-50",children:e.jsx(S,{color:"primary",onClick:$,children:"Add Group"})})]}),e.jsx(y,{fluid:!0,children:e.jsxs(w,{className:"my-3",children:[e.jsx(C,{sm:8,children:e.jsx(A,{type:"text",placeholder:"Search by Group / Sport / Position name","aria-label":"",onChange:V})}),e.jsx(C,{sm:2,children:e.jsx(g,{"aria-label":"",options:[{label:"Filter by Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:q})}),e.jsx(C,{sm:2,children:e.jsx(g,{"aria-label":"",options:["Sort by",{label:"Created Date - Old to New",value:"date_o2n"},{label:"Created Date - New to Old",value:"date_n2o"}],onChange:z})})]})}),e.jsxs(ce,{bordered:!0,hover:!0,responsive:"lg",children:[e.jsx(de,{color:"primary",children:e.jsxs(H,{children:[e.jsx(i,{scope:"col",children:"#"}),e.jsx(i,{scope:"col",children:"Group Name"}),e.jsx(i,{scope:"col",children:"Sports"}),e.jsx(i,{scope:"col",children:"Role"}),e.jsx(i,{scope:"col",children:"Status"}),e.jsx(i,{scope:"col",children:"Created Date"}),e.jsx(i,{scope:"col",children:"Action"})]})}),e.jsx(ue,{hover:!0,children:R.map((t,a)=>e.jsxs(H,{id:t._id,children:[e.jsx(i,{scope:"row",children:a+1}),e.jsx(m,{children:t.name}),e.jsx(m,{children:t.game}),e.jsx(m,{children:t.position}),e.jsx(m,{children:e.jsxs(g,{"aria-label":"",value:t.status,onChange:Q,id:t._id,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx(m,{children:ie(t.created_on)}),e.jsx(m,{className:"text-center",children:e.jsx(te,{icon:pe,gr_id:t._id,className:"edit-icon",onClick:J})})]},a))})]}),s&&(n||G)&&e.jsxs(me,{backdrop:"static",alignment:"center",visible:L,onClose:()=>u(!1),children:[e.jsx(he,{children:e.jsx(xe,{children:e.jsx("strong",{children:"Modify Group"})})}),e.jsx(je,{children:e.jsx(y,{children:e.jsx(w,{children:e.jsxs(C,{sm:12,children:[e.jsx(ge,{color:"danger",variant:"solid",dismissible:!0,visible:W,onClose:()=>r(!1),children:B}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(A,{type:"text",id:"groupNameInput",text:"",floatingLabel:"Group Name",placeholder:"Input Group Name Here",className:"mb-3",value:(n||G)&&s.name===""?"":s.name,onChange:K,autoFocus:!0})}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(g,{"aria-label":"",placeholder:"Select Sport Here",floatingLabel:"Sport",value:n&&s.game_id===""?"":s.game_id,options:[{label:"Select Sport Here",value:""},...F.map(t=>({label:t.name,value:t._id}))],onChange:Y,disabled:!!n})}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(g,{"aria-label":"",placeholder:"Select Role Here",floatingLabel:"Role",value:n&&s.position_id===""?"":s.position_id,options:[{label:"Select Role Here",value:""},...M.map(t=>({label:t.name,value:t._id}))],onChange:Z,disabled:!!n})})]})})})}),e.jsxs(fe,{children:[e.jsx(S,{color:"secondary",variant:"outline",onClick:()=>u(!1),children:"Close"}),e.jsx(S,{color:"success",variant:"outline",onClick:n?X:ee,children:"Save changes"})]})]})]})};export{Ue as default};
