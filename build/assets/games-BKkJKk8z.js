import{r as t,j as e}from"./index-CYK8cNZ3.js";import{a as j,b,c as V}from"./index.es-ZjOKsP15.js";import{l as O,m as q}from"./Api-8GZy8yd7.js";import{e as z}from"./Utils-DDx7YewV.js";import{C as J}from"./CCardHeader-DvjWQ09B.js";import{C as S,a as f}from"./CRow-Di0gQowN.js";import{C as G}from"./CFormInput-DXgor7iN.js";import{C as y}from"./CFormSelect-BXlMpYhN.js";import{C as K,a as Q,b as N,c as r,d as X,e as h}from"./CTable-BPykyNEs.js";import{F as Y}from"./DefaultLayout-f2Cjj74w.js";import{C as Z,a as $,b as ee,c as ae,d as se}from"./CModalTitle-DdaS_Gc4.js";import{C as te}from"./CAlert-C1k8TqvA.js";import"./CFormControlWrapper-C7QaR4dY.js";import"./CFormControlValidation--hCqkr01.js";import"./CFormLabel-BLmK8-xQ.js";import"./CCloseButton-DHtEQYAy.js";import"./cil-user-CkgHmeNI.js";const Se=()=>{const[w,A]=t.useState([]),[u,_]=t.useState([]),[x,T]=t.useState([]),[F,i]=t.useState(!1),[I,o]=t.useState(!1),[M,c]=t.useState(""),[d,C]=t.useState(!1),[g,k]=t.useState(!1),[m,p]=t.useState(!1);t.useEffect(()=>{n(),D()},[]);const n=async(s="",a="")=>{const l={};s&&(l.searchStr=s),a&&(l.filter=a);const v=await O(l);A(v)},D=async()=>{const s=await getSportsList();setSports(s)},H=async s=>{const a=await getPositionList(s);setRoles(a)},R=s=>{let a=s.target.value;console.log(a),_(a),n(a,x)},U=s=>{let a=s.target.value;console.log(a),T(a),n(u,a)},P=async s=>{let a=await getGameDetails(s.target.getAttribute("gr_id"));a||c("Something Went Wrong"),await p(a),await H(a.game_id),i(!0),C(!0),o(!1)},W=s=>{const a=s.target.value;p(l=>({...l,game_name:a===""?"":a}))},B=async s=>{let a=s.target.id,l=s.target.value;await updateGame(a,l,"")?n(u,x):c("Oops! Something Went Wrong")},E=async s=>{i(!0),C(!1),k(!0),p({game_name:"",status:"active"}),o(!1)},L=async s=>{if(m.name===""){c("Game name can't be empty"),o(!0);return}const a=await q(m);a.err?(c(a.message),o(!0)):(n(u,x),i(!1))};return e.jsxs("div",{children:[e.jsxs(J,{className:"d-flex",children:[e.jsx("div",{className:"w-50",children:e.jsx("h3",{children:"All Games"})}),e.jsx("div",{className:"d-flex justify-content-end w-50",children:e.jsx(j,{color:"primary",onClick:E,children:"Add Game"})})]}),e.jsx(b,{fluid:!0,children:e.jsxs(S,{className:"my-3",children:[e.jsx(f,{sm:10,children:e.jsx(G,{type:"text",placeholder:"Search by Game name","aria-label":"",onChange:R})}),e.jsx(f,{sm:2,children:e.jsx(y,{"aria-label":"",options:[{label:"Filter by Status",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],onChange:U})})]})}),e.jsxs(K,{bordered:!0,hover:!0,responsive:"lg",children:[e.jsx(Q,{color:"primary",children:e.jsxs(N,{children:[e.jsx(r,{scope:"col",children:"#"}),e.jsx(r,{scope:"col",children:"Game Name"}),e.jsx(r,{scope:"col",children:"Status"}),e.jsx(r,{scope:"col",children:"Created Date"}),e.jsx(r,{scope:"col",children:"Action"})]})}),e.jsx(X,{hover:!0,children:w.map((s,a)=>e.jsxs(N,{id:s._id,children:[e.jsx(r,{scope:"row",children:a+1}),e.jsx(h,{children:s.name}),e.jsx(h,{children:e.jsxs(y,{"aria-label":"",value:s.status,onChange:B,id:s._id,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsx(h,{children:z(s.created_on)}),e.jsx(h,{className:"text-center",children:e.jsx(V,{icon:Y,gr_id:s._id,className:"edit-icon",onClick:P})})]},a))})]}),(d||g)&&e.jsxs(Z,{backdrop:"static",alignment:"center",visible:F,onClose:()=>i(!1),children:[e.jsx($,{children:e.jsx(ee,{children:e.jsx("strong",{children:d?"Modify Game":"Add Game"})})}),e.jsx(ae,{children:e.jsx(b,{children:e.jsx(S,{children:e.jsxs(f,{sm:12,children:[e.jsx(te,{color:"danger",variant:"solid",dismissible:!0,visible:I,onClose:()=>o(!1),children:M}),e.jsx("div",{className:"mt-3 w-100",children:e.jsx(G,{type:"text",id:"gameNameInput",text:"",floatingLabel:"Game Name",placeholder:"Input Game Name Here",className:"mb-3",value:(d||g)&&m.game_name===""?"":m.game_name,onChange:W,autoFocus:!0})})]})})})}),e.jsxs(se,{children:[e.jsx(j,{color:"secondary",variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(j,{color:"success",variant:"outline",onClick:d?updateGameName:L,children:"Save changes"})]})]})]})};export{Se as default};
