import{r,i as V,j as e}from"./index-DmBNmXxH.js";import{g as O,b as P,c as q,u as z}from"./Api-BNS9B-Je.js";import{g as G,e as J}from"./Utils-DDx7YewV.js";import{C as K}from"./CCardHeader-CzO2BemY.js";import{b as g,a as C}from"./index.es-AemPbeMY.js";import{C as S,a as p}from"./CRow-jzpXUlN9.js";import{C as f}from"./CFormInput-C-86LtXe.js";import{C as b}from"./CFormSelect-B7pxHhr9.js";import{C as Q,a as X,b as v,c as a,d as Y,e as l}from"./CTable-C-_n4QPN.js";import{C as Z,a as $,b as ee,c as se,d as te}from"./CModalTitle-D98O1CVF.js";import{C as re}from"./CAlert-Bn-TSLil.js";import"./CFormControlWrapper-By7qgFL9.js";import"./CFormControlValidation-B7mzmsB-.js";import"./CFormLabel-CgfR9q9W.js";import"./CCloseButton-DN8sPR4q.js";import"./DefaultLayout-CUqy_TZH.js";import"./cil-user-CkgHmeNI.js";const be=()=>{const[y,U]=r.useState([]),[T,w]=r.useState([]),[m,D]=r.useState([]),[u,F]=r.useState([]),[x,_]=r.useState([]),[k,i]=r.useState(!1),[o,j]=r.useState(null),[N,c]=r.useState(!1);r.useEffect(()=>{n(),M(),H()},[]);const H=()=>{let s=localStorage.getItem("token");s&&s!==""||(navigator=V(),navigator({to:"/login"}))},n=async(s="",t="",d="")=>{const h={};s&&(h.searchStr=s),t&&(h.filter=t),d&&(h.sort=d);const E=await O(h);U(E)},M=async()=>{const s=await P();w(s)},I=s=>{let t=s.target.value;console.log(t),D(t),n(t,u,x)},A=s=>{let t=s.target.value;console.log(t),F(t),n(m,t,x)},L=s=>{let t=s.target.value;console.log(t),_(t),n(m,u,t)},R=async s=>{let t=await q(s.currentTarget.id);t||alert("Something Went Wrong"),i(!0),c(!1),j(t)},W=s=>{const t=s.target.value;j(d=>({...d,score:t===""?"":parseInt(t,10)}))},B=async()=>{if(o.score==="")return c(!0),!1;await z(o)?(c(!1),i(!1),n(m,u,x)):c(!0)};return e.jsxs("div",{children:[e.jsx(K,{children:e.jsx("h3",{children:"All Users"})}),e.jsx(g,{fluid:!0,children:e.jsxs(S,{className:"my-3",children:[e.jsx(p,{sm:8,children:e.jsx(f,{type:"text",placeholder:"Search by User's Name","aria-label":"",onChange:I})}),e.jsx(p,{sm:2,children:e.jsx(b,{"aria-label":"",options:[{label:"Filter by Sports",value:""},...T.map(s=>({label:s.name,value:s._id}))],onChange:A})}),e.jsx(p,{sm:2,children:e.jsx(b,{"aria-label":"",options:["Sort by",{label:"Score - High to Low",value:"score_h2l"},{label:"Score - Low to High",value:"score_l2h"},{label:"Signup Date - Old to New",value:"date_o2n"},{label:"Signup Date - New to Old",value:"date_n2o"}],onChange:L})})]})}),e.jsxs(Q,{bordered:!0,hover:!0,responsive:"lg",children:[e.jsx(X,{color:"primary",children:e.jsxs(v,{children:[e.jsx(a,{scope:"col",children:"#"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"Type"}),e.jsx(a,{scope:"col",children:"Sports"}),e.jsx(a,{scope:"col",children:"Role"}),e.jsx(a,{scope:"col",children:"Score"}),e.jsx(a,{scope:"col",children:"Signup Date"})]})}),e.jsx(Y,{hover:!0,children:y.map((s,t)=>e.jsxs(v,{id:s._id,onClick:R,children:[e.jsx(a,{scope:"row",children:t+1}),e.jsx(l,{children:s.name}),e.jsx(l,{children:G(s.user_type)}),e.jsx(l,{children:s.sports}),e.jsx(l,{children:s.role}),e.jsx(l,{children:s.score}),e.jsx(l,{children:J(s.created_on)})]},t))})]}),o&&e.jsxs(Z,{backdrop:"static",alignment:"center",visible:k,onClose:()=>i(!1),children:[e.jsx($,{children:e.jsxs(ee,{children:["User Score : ",e.jsx("strong",{children:o.name})]})}),e.jsx(se,{children:e.jsx(g,{children:e.jsx(S,{children:e.jsx(p,{sm:12,children:e.jsxs("div",{className:"mt-3",children:[e.jsx(f,{type:"number",id:"userScoreInput",label:"Score",text:"Must be a number.",value:o.score===""?"":o.score,onChange:W,autoFocus:!0}),e.jsx(re,{color:"danger",variant:"solid",dismissible:!0,visible:N,onClose:()=>c(!1),children:"Something Went Wrong. Please Try Again"})]})})})})}),e.jsxs(te,{children:[e.jsx(C,{color:"secondary",variant:"outline",onClick:()=>i(!1),children:"Close"}),e.jsx(C,{color:"success",variant:"outline",onClick:B,children:"Save changes"})]})]})]})};export{be as default};
